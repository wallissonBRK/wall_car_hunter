name: Sniper de Etios 游꿢

on:
  schedule:
    # Roda todos os dias 맙 08:00, 12:00 e 18:00 (Hor치rio BR aprox)
    - cron: "0 11,15,21 * * *"
  workflow_dispatch: # Permite rodar manualmente clicando no bot칚o "Run workflow"

jobs:
  buscar:
    runs-on: ubuntu-latest

    steps:
      # 1. Baixa seu c칩digo do GitHub para a m치quina virtual
      - name: Checkout do c칩digo
        uses: actions/checkout@v4

      # 2. Instala o Python 3.10
      - name: Configurar Python
        uses: actions/setup-python@v4
        with:
          python-version: "3.10"

      # 3. Instala as bibliotecas necess치rias
      - name: Instalar Depend칡ncias
        run: pip install requests beautifulsoup4

      # 4. Roda o Autocarro (Script que fizemos antes)
      - name: 游댍 Rodar Autocarro
        env:
          TELEGRAM_TOKEN: ${{ secrets.TELEGRAM_TOKEN }}
          TELEGRAM_CHAT_ID: ${{ secrets.TELEGRAM_CHAT_ID }}
        run: python autocarro.py

      # 5. Roda Webmotors
      # IMPORTANTE: "continue-on-error: true"
      # Como a Webmotors tem prote칞칚o forte, 맙 vezes o script pode falhar.
      # Com essa linha, se falhar, o GitHub avisa mas n칚o marca tudo como erro cr칤tico.
      - name: 游댍 Rodar Webmotors
        continue-on-error: true
        env:
          TELEGRAM_TOKEN: ${{ secrets.TELEGRAM_TOKEN }}
          TELEGRAM_CHAT_ID: ${{ secrets.TELEGRAM_CHAT_ID }}
        run: python webmotors.py
